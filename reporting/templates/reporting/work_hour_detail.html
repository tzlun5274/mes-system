{% extends 'base.html' %}
{% load static %}

{% block title %}工時報表詳情 - MES系統{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- 頁面標題 -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="h3 mb-0">
                        <i class="fas fa-clock text-primary"></i>
                        工時報表詳情
                    </h1>
                    <p class="text-muted mb-0">{{ work_hour_report.worker_name }} - {{ work_hour_report.report_date }}</p>
                </div>
                <div class="btn-group">
                    <a href="{% url 'reporting:work_hour_list' %}" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> 返回列表
                    </a>
                    <a href="{% url 'reporting:work_hour_export' %}?id={{ work_hour_report.id }}" class="btn btn-success">
                        <i class="fas fa-download"></i> 匯出報表
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- 基本資訊卡片 -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-user"></i> 基本資訊
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <p><strong>作業員姓名:</strong> {{ work_hour_report.worker_name }}</p>
                            <p><strong>作業員編號:</strong> {{ work_hour_report.worker_id|default:"-" }}</p>
                            <p><strong>工單號碼:</strong> {{ work_hour_report.workorder_number|default:"-" }}</p>
                            <p><strong>產品編號:</strong> {{ work_hour_report.product_code|default:"-" }}</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>工序名稱:</strong> {{ work_hour_report.process_name|default:"-" }}</p>
                            <p><strong>報表日期:</strong> {{ work_hour_report.report_date|date:"Y-m-d" }}</p>
                            <p><strong>開始時間:</strong> {{ work_hour_report.start_time|time:"H:i"|default:"-" }}</p>
                            <p><strong>結束時間:</strong> {{ work_hour_report.end_time|time:"H:i"|default:"-" }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-chart-pie"></i> 工時統計
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="text-center mb-3">
                                <h4 class="text-primary">{{ work_hour_report.total_work_hours|floatformat:1 }}h</h4>
                                <small class="text-muted">總工作時數</small>
                            </div>
                            <div class="text-center mb-3">
                                <h4 class="text-success">{{ work_hour_report.actual_work_hours|floatformat:1 }}h</h4>
                                <small class="text-muted">實際工作時數</small>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="text-center mb-3">
                                <h4 class="text-info">{{ work_hour_report.regular_hours|floatformat:1 }}h</h4>
                                <small class="text-muted">正常工時</small>
                            </div>
                            <div class="text-center mb-3">
                                <h4 class="text-warning">{{ work_hour_report.overtime_hours|floatformat:1 }}h</h4>
                                <small class="text-muted">加班時數</small>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <h4 class="text-secondary">{{ work_hour_report.break_hours|floatformat:1 }}h</h4>
                        <small class="text-muted">休息時數</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 產量與效率卡片 -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-boxes"></i> 產量資訊
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="text-center mb-3">
                                <h4 class="text-success">{{ work_hour_report.completed_quantity|intcomma }}</h4>
                                <small class="text-muted">完成數量</small>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="text-center mb-3">
                                <h4 class="text-warning">{{ work_hour_report.defect_quantity|intcomma }}</h4>
                                <small class="text-muted">不良品數量</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-tachometer-alt"></i> 效率指標
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="text-center mb-3">
                                <h4 class="text-primary">{{ work_hour_report.efficiency_rate|floatformat:2 }}</h4>
                                <small class="text-muted">效率 (件/小時)</small>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="text-center mb-3">
                                <h4 class="text-info">{{ work_hour_report.yield_rate|floatformat:1 }}%</h4>
                                <small class="text-muted">良率</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 系統資訊卡片 -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-info-circle"></i> 系統資訊
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <p><strong>數據來源:</strong> {{ work_hour_report.data_source }}</p>
                            <p><strong>計算方法:</strong> {{ work_hour_report.calculation_method }}</p>
                        </div>
                        <div class="col-sm-6">
                            <p><strong>建立時間:</strong> {{ work_hour_report.created_at|date:"Y-m-d H:i:s" }}</p>
                            <p><strong>更新時間:</strong> {{ work_hour_report.updated_at|date:"Y-m-d H:i:s" }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 