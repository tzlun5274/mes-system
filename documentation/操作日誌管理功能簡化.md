# 操作日誌管理功能簡化

## 修改概述
移除操作日誌管理頁面中的「設置紀錄保留天數」功能，避免與專門的報表清理設定管理介面產生衝突。

## 修改原因
1. **功能重複**：操作日誌管理頁面中的保留天數設定與報表清理設定功能重複
2. **管理混亂**：兩個地方都可以設定清理相關參數，容易造成混淆
3. **統一管理**：現在有專門的報表清理設定頁面，應該統一在那裡管理所有清理相關設定

## 修改內容

### 1. 前端模板修改
- **檔案**：`system/templates/system/operation_log_manage.html`
- **修改**：移除「設置紀錄保留天數」區塊
- **保留**：操作紀錄查詢和顯示功能

### 2. 後端視圖修改
- **檔案**：`system/views.py`
- **修改**：移除 `operation_log_manage` 視圖中處理保留天數設定的邏輯
- **移除**：POST 請求處理、表單驗證、配置更新等邏輯
- **移除**：不再使用的 `OperationLogConfigForm` import

### 3. 功能保留
- **操作日誌查詢**：按模組、使用者、日期範圍篩選
- **操作日誌顯示**：表格形式顯示日誌記錄
- **手動清理**：「清理過期紀錄」按鈕功能保留

## 修改前後對比

### 修改前
```
操作日誌管理頁面
├── 設置紀錄保留天數 (已移除)
│   ├── 保留天數輸入框
│   ├── 保存按鈕
│   └── 返回按鈕
└── 操作紀錄
    ├── 篩選條件
    ├── 清理過期紀錄按鈕
    └── 日誌表格
```

### 修改後
```
操作日誌管理頁面
└── 操作紀錄
    ├── 篩選條件
    ├── 清理過期紀錄按鈕
    └── 日誌表格
```

## 清理設定統一管理

現在所有清理相關的設定都統一在「報表清理設定」頁面管理：

### 報表清理設定頁面功能
- ✅ 啟用/停用自動清理功能
- ✅ 設定報表檔案保留天數
- ✅ 設定執行日誌保留天數
- ✅ 手動執行清理操作
- ✅ 查看清理歷史記錄

### 操作日誌管理頁面功能
- ✅ 查詢和顯示操作日誌
- ✅ 按條件篩選日誌
- ✅ 手動清理過期日誌

## 使用方式

### 設定清理參數
1. 進入系統管理首頁
2. 點擊「報表清理設定」
3. 在專門的設定頁面中配置所有清理相關參數

### 查看操作日誌
1. 進入系統管理首頁
2. 點擊「操作日誌管理」
3. 使用篩選條件查詢日誌
4. 可手動清理過期日誌

## 注意事項

1. **功能分離**：清理設定和日誌查看功能現在完全分離
2. **統一管理**：所有清理相關設定都在報表清理設定頁面統一管理
3. **避免衝突**：不再有兩個地方可以設定清理參數的問題
4. **保持功能**：操作日誌的查詢和手動清理功能完全保留

## 更新日期
2025-01-27

## 更新人員
MES 系統開發團隊
