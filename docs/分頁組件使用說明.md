# å…¨å±€å…±ç”¨åˆ†é çµ„ä»¶ä½¿ç”¨èªªæ˜

## æ¦‚è¿°

MES ç³»çµ±æä¾›å…¨å±€å…±ç”¨çš„åˆ†é çµ„ä»¶ï¼Œè®“æ‰€æœ‰åˆ—è¡¨é é¢éƒ½èƒ½ä½¿ç”¨çµ±ä¸€çš„åˆ†é åŠŸèƒ½ï¼Œç¬¦åˆ MES_ç¨‹å¼é–‹ç™¼è¨­è¨ˆè¦ç¯„ã€‚

## çµ„ä»¶ç‰¹è‰²

### ğŸ¨ **çµ±ä¸€è¨­è¨ˆé¢¨æ ¼**
- Bootstrap 5 éŸ¿æ‡‰å¼è¨­è¨ˆ
- ç¬¦åˆ MES ç³»çµ±è¦–è¦ºè¦ç¯„
- æ”¯æ´ç„¡éšœç¤™è¨­è¨ˆ

### ğŸ”§ **åŠŸèƒ½å®Œæ•´**
- ç¬¬ä¸€é /æœ€å¾Œä¸€é å¿«é€Ÿè·³è½‰
- ä¸Šä¸€é /ä¸‹ä¸€é å°èˆª
- é ç¢¼é¡¯ç¤ºï¼ˆç•¶å‰é å‰å¾Œ3é ï¼‰
- åˆ†é è³‡è¨Šé¡¯ç¤º
- è‡ªå‹•éš±è—å–®é åˆ†é 

### ğŸ“± **éŸ¿æ‡‰å¼æ”¯æ´**
- æ¡Œé¢ç‰ˆé¡¯ç¤ºå®Œæ•´æ–‡å­—
- æ‰‹æ©Ÿç‰ˆåªé¡¯ç¤ºåœ–ç¤º
- è‡ªé©æ‡‰å„ç¨®è¢å¹•å°ºå¯¸

## ä½¿ç”¨æ–¹å¼

### 1. åŸºæœ¬ä½¿ç”¨ï¼ˆæ¨è–¦ï¼‰

åœ¨æ¨¡æ¿ä¸­è¼‰å…¥åˆ†é æ¨™ç±¤ä¸¦ä½¿ç”¨ï¼š

```django
{% extends 'base.html' %}
{% load pagination_tags %}

{% block content %}
<!-- ä½ çš„è¡¨æ ¼å…§å®¹ -->
<table>
    <!-- è¡¨æ ¼è³‡æ–™ -->
</table>

<!-- ä½¿ç”¨å…¨å±€å…±ç”¨åˆ†é çµ„ä»¶ -->
{% include 'includes/pagination.html' with page_obj=your_page_object %}
{% endblock %}
```

### 2. é€²éšä½¿ç”¨ï¼ˆå¸¶æŸ¥è©¢åƒæ•¸ï¼‰

å¦‚æœéœ€è¦ä¿ç•™æŸ¥è©¢åƒæ•¸ï¼š

```django
{% include 'includes/pagination.html' with page_obj=reports extra_params='equipment=1&status=pending' %}
```

### 3. ä½¿ç”¨æ¨¡æ¿æ¨™ç±¤

ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šç¾©æ¨¡æ¿æ¨™ç±¤ï¼š

```django
{% load pagination_tags %}

<!-- æ¸²æŸ“å®Œæ•´åˆ†é çµ„ä»¶ -->
{% render_pagination page_obj %}

<!-- ç²å–åˆ†é è³‡è¨Š -->
{% get_pagination_info page_obj as pagination_info %}
ç•¶å‰é ï¼š{{ pagination_info.current_page }}

<!-- å»ºç«‹åˆ†é  URL -->
<a href="{% build_pagination_url 2 equipment=1 %}">ç¬¬2é </a>

<!-- åˆ†é ç¯„åœ -->
{% for num in page_obj|pagination_range:3 %}
    <a href="?page={{ num }}">{{ num }}</a>
{% endfor %}
```

## å¾Œç«¯è¨­å®š

### Django ListView è¨­å®š

```python
class YourListView(LoginRequiredMixin, ListView):
    model = YourModel
    template_name = 'your_template.html'
    context_object_name = 'your_objects'
    paginate_by = 20  # æ¯é é¡¯ç¤º20ç­†
    ordering = ['-created_at']
```

### å‡½æ•¸å¼è¦–åœ–è¨­å®š

```python
from django.core.paginator import Paginator

def your_view(request):
    queryset = YourModel.objects.all()
    paginator = Paginator(queryset, 20)
    page_number = request.GET.get('page')
    page_obj = paginator.get_page(page_number)
    
    context = {
        'page_obj': page_obj,
        'your_objects': page_obj,
    }
    return render(request, 'your_template.html', context)
```

## æª”æ¡ˆçµæ§‹

```
templates/
â”œâ”€â”€ includes/
â”‚   â””â”€â”€ pagination.html          # å…¨å±€å…±ç”¨åˆ†é çµ„ä»¶
workorder/
â”œâ”€â”€ templatetags/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ pagination_tags.py       # åˆ†é ç›¸é—œæ¨¡æ¿æ¨™ç±¤
```

## æ¨£å¼è‡ªè¨‚

åˆ†é çµ„ä»¶ä½¿ç”¨ Bootstrap 5 æ¨£å¼ï¼Œå¦‚éœ€è‡ªè¨‚å¯åœ¨ CSS ä¸­è¦†å¯«ï¼š

```css
/* è‡ªè¨‚åˆ†é æ¨£å¼ */
.pagination .page-link {
    border-radius: 4px;
    margin: 0 2px;
}

.pagination .page-item.active .page-link {
    background-color: #007bff;
    border-color: #007bff;
}
```

## æ³¨æ„äº‹é …

1. **å¿…é ˆå‚³å…¥ page_obj åƒæ•¸**ï¼šåˆ†é çµ„ä»¶éœ€è¦ Django çš„ Page ç‰©ä»¶
2. **æŸ¥è©¢åƒæ•¸è™•ç†**ï¼šä½¿ç”¨ `extra_params` å‚³éé¡å¤–çš„æŸ¥è©¢åƒæ•¸
3. **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼šçµ„ä»¶æœƒè‡ªå‹•é©æ‡‰ä¸åŒè¢å¹•å°ºå¯¸
4. **ç„¡éšœç¤™æ”¯æ´**ï¼šåŒ…å«é©ç•¶çš„ ARIA æ¨™ç±¤å’Œèªç¾©åŒ– HTML

## ç¯„ä¾‹

### å®Œæ•´çš„åˆ—è¡¨é é¢ç¯„ä¾‹

```django
{% extends 'base.html' %}
{% load pagination_tags %}

{% block title %}æˆ‘çš„åˆ—è¡¨{% endblock %}

{% block content %}
<div class="container">
    <h1>æˆ‘çš„åˆ—è¡¨</h1>
    
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>åç¨±</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for item in page_obj %}
                <tr>
                    <td>{{ item.id }}</td>
                    <td>{{ item.name }}</td>
                    <td>
                        <a href="{% url 'item_detail' item.id %}" class="btn btn-sm btn-primary">è©³æƒ…</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <!-- ä½¿ç”¨å…¨å±€å…±ç”¨åˆ†é çµ„ä»¶ -->
    {% include 'includes/pagination.html' with page_obj=page_obj %}
</div>
{% endblock %}
```

## æ›´æ–°è¨˜éŒ„

- **v1.0**ï¼šåˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æ´åŸºæœ¬åˆ†é åŠŸèƒ½
- **v1.1**ï¼šæ–°å¢æ¨¡æ¿æ¨™ç±¤æ”¯æ´
- **v1.2**ï¼šå„ªåŒ–éŸ¿æ‡‰å¼è¨­è¨ˆ
- **v1.3**ï¼šæ–°å¢ç„¡éšœç¤™æ”¯æ´

---

**éµå¾ª MES_ç¨‹å¼é–‹ç™¼è¨­è¨ˆè¦ç¯„ï¼Œç¢ºä¿æ‰€æœ‰åˆ†é åŠŸèƒ½çš„ä¸€è‡´æ€§èˆ‡å¯ç¶­è­·æ€§ã€‚** 