---
description:
globs:
alwaysApply: false
---

工單管理有多個子模組。
1. 基本設定。
-有多家公司，並會有重複的製令單號，設計須考慮多公司架構。

2. 資料隔離：不同公司的資料應該完全隔離。

3.子模組分類 
公司製令單 (獨立模組)
MES工單管理 (獨立模組)
派工單 (獨立模組)
填報管理 (獨立模組)
生產監控 (獨立模組)
已完工工單 (獨立模組)
現場報工管理 (獨立模組)
每個功能都是獨立的子模組。

4. 生產監控有工序紀錄來源為現場報工資料，填報紀錄來源為填報管理，完工功能判斷程式需分成兩個，一個工序紀錄完工判斷，一個填報紀錄完工判斷。
4-1. 派工單的工序與現場報工做關聯，工單詳情的工序紀錄與現場報工關聯。
4-2. 工單詳情的填報紀錄與填報管理做關聯。 
4-3. 工單詳情的完工判斷 以工序紀錄跟填報紀錄做合併計算

## 統一API端點規範

### API路徑
所有工單相關API統一使用 `/var/www/mes/workorder/static/api/` 路徑

### 統一JS模組配置
```javascript
apiPrefix: '/var/www/mes/workorder/static/js/work_common.js'
```