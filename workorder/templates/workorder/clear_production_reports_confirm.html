{% extends 'base.html' %}
{% load static %}

{% block title %}清除所有報工紀錄 - 確認{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h2>清除所有報工紀錄</h2>
            
            <!-- 導航麵包屑 -->
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'workorder:index' %}">工單管理</a></li>
                    <li class="breadcrumb-item active">清除報工紀錄</li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- 警告區塊 -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="alert alert-danger">
                <h4 class="alert-heading">
                    <i class="fas fa-exclamation-triangle"></i> 警告！
                </h4>
                <p class="mb-0">
                    <strong>此操作將永久刪除所有報工紀錄，無法復原！</strong><br>
                    請確認您真的要執行此操作。
                </p>
            </div>
        </div>
    </div>

    <!-- 統計資訊 -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-bar"></i> 將要清除的報工紀錄統計
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="text-center">
                                <h3 class="text-primary">{{ operator_reports_count }}</h3>
                                <p class="text-muted">作業員補登報工</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center">
                                <h3 class="text-success">{{ smt_supplement_count }}</h3>
                                <p class="text-muted">SMT補登報工</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center">
                                <h3 class="text-info">{{ smt_on_site_count }}</h3>
                                <p class="text-muted">SMT現場報工</p>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="text-center">
                        <h4 class="text-danger">
                            <i class="fas fa-trash"></i> 總計：{{ total_count }} 筆報工紀錄
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 操作按鈕 -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">確認操作</h5>
                    <p class="card-text">
                        點擊下方按鈕確認清除所有報工紀錄。此操作無法復原，請謹慎操作。
                    </p>
                    
                    <form method="post">
                        {% csrf_token %}
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-danger btn-lg">
                                <i class="fas fa-trash"></i> 確認清除所有報工紀錄
                            </button>
                            <a href="{% url 'workorder:index' %}" class="btn btn-secondary btn-lg">
                                <i class="fas fa-times"></i> 取消
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- 說明區塊 -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-info-circle"></i> 操作說明
                    </h5>
                </div>
                <div class="card-body">
                    <ul class="mb-0">
                        <li>此操作將清除所有類型的報工紀錄</li>
                        <li>清除後，您可以重新匯入新的報工紀錄</li>
                        <li>操作會記錄在系統日誌中，方便追蹤</li>
                        <li>建議在清除前先匯出重要資料作為備份</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 