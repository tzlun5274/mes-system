# SMT 現場報工功能說明

## 功能概述

SMT 現場報工功能專為 SMT（表面貼裝技術）設備設計，考慮到 SMT 設備的自動化特性，**不需要作業員欄位**。

## 主要特色

### 1. 自動化導向設計
- ✅ **無作業員欄位**：SMT 設備為自動化運作，不需要手動作業員
- ✅ **設備為中心**：以設備為主要操作對象
- ✅ **即時監控**：提供設備狀態即時監控

### 2. 簡化報工流程
- **設備選擇** → **工單選擇** → **資料輸入** → **提交報工**
- 移除複雜的作業員分配流程
- 移除工作時數和報工時間手動輸入
- 專注於生產資料記錄

### 3. 資料模型設計

#### SMTProductionReport 模型
```python
class SMTProductionReport(models.Model):
    equipment = models.ForeignKey('equip.Equipment')  # 設備
    workorder = models.ForeignKey(WorkOrder)          # 工單
    report_time = models.DateTimeField()              # 報工時間（自動填入）
    quantity = models.IntegerField()                  # 報工數量
    hours = models.DecimalField(default=0.0)          # 工作時數（預設0）
    production_status = models.CharField()            # 報工狀態
    notes = models.TextField()                        # 備註說明
    # 注意：沒有作業員欄位，工作時數和報工時間自動處理
```

### 4. 報工狀態選項
- **開始生產** (start)：設備開始執行生產任務
- **暫停** (pause)：生產過程中暫時停止
- **完工** (complete)：生產任務完成

## 使用流程

### 1. 進入 SMT 現場報工頁面
- 路徑：工單管理 → 報工管理 → SMT報工 → SMT現場報工
- URL：`/workorder/report/smt/on_site/`

### 2. 選擇設備和工單
- 從下拉選單選擇 SMT 設備
- 系統自動載入該設備的相關工單
- 選擇要報工的工單

### 3. 填寫報工資料
- **報工數量**：本次生產的數量
- **報工狀態**：選擇開始生產/暫停/完工
- **備註說明**：可選的補充說明
- **報工時間**：自動填入當前時間（無需手動輸入）
- **工作時數**：自動設為0（無需手動輸入）

### 4. 提交報工
- 點擊「提交報工」按鈕
- 系統驗證資料完整性
- 成功後更新統計資料和記錄列表

## 統計資訊

### 即時統計卡片
- **運轉中設備**：目前正在運轉的 SMT 設備數量
- **今日報工數**：今日已提交的報工記錄數量
- **本班產出**：今日所有報工記錄的總產出數量
- **待處理報工**：待處理的報工記錄數量

### 設備狀態監控
- **設備名稱**：SMT 設備名稱
- **運行狀態**：運轉中/閒置/維護/錯誤
- **當前工單**：正在執行的工單號
- **運行時間**：設備運行時數
- **產出數量**：當前工單的產出數量
- **效率**：設備運行效率百分比

## 技術架構

### 前端技術
- **Bootstrap 5**：響應式 UI 設計
- **jQuery**：AJAX 互動功能
- **即時更新**：每 30 秒自動刷新設備狀態

### 後端技術
- **Django 5.1.8**：Web 框架
- **PostgreSQL**：資料庫
- **RESTful API**：報工提交 API

### API 端點
- **GET** `/workorder/report/smt/on_site/`：SMT 現場報工頁面
- **POST** `/workorder/report/smt/submit/`：提交 SMT 報工記錄

## 與其他報工功能的差異

| 功能 | 管理者報工 | 作業員報工 | SMT報工 |
|------|------------|------------|---------|
| 作業員欄位 | ✅ 需要 | ✅ 需要 | ❌ 不需要 |
| 設備欄位 | ✅ 需要 | ✅ 需要 | ✅ 需要 |
| 自動化程度 | 手動 | 手動 | 自動化 |
| 適用場景 | 管理審核 | 現場作業 | SMT設備 |

## 未來擴展

### 計劃功能
1. **設備連線整合**：與實際 SMT 設備連線，自動取得運行資料
2. **品質檢測整合**：與 AOI（自動光學檢測）系統整合
3. **預警功能**：設備異常自動警報
4. **報表分析**：SMT 生產效率分析報表

### 資料分析
- 設備利用率分析
- 生產效率趨勢
- 品質改善建議
- 設備維護預測

## 注意事項

1. **資料完整性**：所有必要欄位都必須填寫
2. **時間準確性**：報工時間會自動填入當前時間
3. **品質記錄**：品質狀態會影響後續的品質分析
4. **設備狀態**：確保選擇的設備狀態正確

## 聯絡支援

如有問題或建議，請聯絡系統管理員或開發團隊。 