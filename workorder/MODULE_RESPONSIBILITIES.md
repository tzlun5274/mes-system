# MES 系統模組職責分工說明

## 模組職責分工

### 1. 工單管理模組 (`workorder`)
**主要職責：**
- 工單的基本管理（建立、編輯、刪除、查詢）
- 工單狀態管理（待生產、生產中、暫停、已完成）
- 工單工序明細管理
- 工單與 ERP 系統的資料同步
- 工單的進度追蹤

**不負責：**
- 派工功能（已移至派工單管理模組）
- 報工功能（已移至報工單管理模組）

### 2. 派工單管理模組（待建立）
**主要職責：**
- 工單派工管理
- 作業員派工分配
- 設備派工分配
- 派工記錄追蹤
- 派工狀態管理

**功能範圍：**
- 派工單建立與管理
- 作業員派工操作
- 設備派工操作
- 派工記錄查詢
- 派工統計報表

### 3. 報工單管理模組（現有的 `workorder` 模組中的報工功能）
**主要職責：**
- SMT 報工管理
- 作業員報工管理
- 報工記錄追蹤
- 報工統計分析

**功能範圍：**
- SMT 現場報工
- SMT 補登報工
- 作業員現場報工
- 作業員補登報工
- 報工記錄查詢
- 報工統計報表

## 模組間協作關係

### 工單管理 → 派工單管理
- 工單管理提供待派工的工單資料
- 派工單管理讀取工單資訊進行派工

### 派工單管理 → 報工單管理
- 派工單管理提供已派工的工單資料
- 報工單管理讀取派工資訊進行報工

### 報工單管理 → 工單管理
- 報工單管理更新工單的完成進度
- 工單管理接收報工資料更新狀態

## 資料流向

```
ERP 系統 → 工單管理 → 派工單管理 → 報工單管理 → 工單管理 → ERP 系統
```

1. **ERP 同步**：工單管理從 ERP 取得製令資料
2. **工單建立**：工單管理建立 MES 工單
3. **派工分配**：派工單管理將工單分配給作業員/設備
4. **報工記錄**：報工單管理記錄實際生產狀況
5. **進度更新**：工單管理更新工單進度
6. **狀態回傳**：工單管理將完成狀態回傳 ERP

## 注意事項

1. **職責分離**：每個模組只負責自己的核心功能，避免功能重疊
2. **資料一致性**：模組間透過標準化的 API 介面進行資料交換
3. **狀態同步**：確保工單狀態在各模組間保持一致
4. **權限控制**：不同模組有不同的操作權限和角色

## 未來發展

1. **派工單管理模組**：需要建立獨立的派工單管理模組
2. **報工單管理模組**：將報工功能從 workorder 模組中分離出來
3. **API 標準化**：建立統一的模組間通訊標準
4. **監控整合**：建立跨模組的監控和警報機制 