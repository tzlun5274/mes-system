# æ‰‹å‹•é‡å»º MES ç³»çµ±è³‡æ–™åº«æ­¥é©Ÿ

## ğŸ”§ å®Œæ•´é‡å»ºæµç¨‹

### æ–¹æ³•1: ä½¿ç”¨è‡ªå‹•åŒ–è…³æœ¬ï¼ˆæ¨è–¦ï¼‰

```bash
# 1. çµ¦è…³æœ¬åŸ·è¡Œæ¬Šé™
chmod +x rebuild_database.sh
chmod +x run_rebuild.sh

# 2. åŸ·è¡Œé‡å»ºè…³æœ¬
./rebuild_database.sh

# æˆ–è€…ä½¿ç”¨ Python è…³æœ¬
python3 rebuild_db.py
```

### æ–¹æ³•2: æ‰‹å‹•åŸ·è¡Œå‘½ä»¤

```bash
# 1. è¨­å®šç’°å¢ƒè®Šæ•¸
export PGPASSWORD=mes_password
export DJANGO_SETTINGS_MODULE=mes_config.settings
export PYTHONPATH=/var/www/mes

# 2. åœæ­¢æ‰€æœ‰è³‡æ–™åº«é€£ç·š
psql -h localhost -p 5432 -U mes_user -d postgres -c "SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE datname = 'mes_db' AND pid <> pg_backend_pid();"

# 3. åˆªé™¤ç¾æœ‰è³‡æ–™åº«
dropdb -h localhost -p 5432 -U mes_user --if-exists mes_db

# 4. é‡æ–°å»ºç«‹è³‡æ–™åº«
createdb -h localhost -p 5432 -U mes_user mes_db

# 5. è¨­å®š schema
psql -h localhost -p 5432 -U mes_user -d mes_db -c "SET search_path TO public;"

# 6. åˆ‡æ›åˆ°å°ˆæ¡ˆç›®éŒ„
cd /var/www/mes

# 7. åŸ·è¡Œ Django migrate
python3 manage.py migrate --noinput

# 8. å»ºç«‹è¶…ç´šç”¨æˆ¶
python3 manage.py createsuperuser --noinput --username admin --email admin@example.com

# 9. å»ºç«‹åŸºæœ¬ç¾¤çµ„
python3 -c "
import os
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'mes_config.settings')
import django
django.setup()
from django.contrib.auth.models import Group
groups = ['ç³»çµ±ç®¡ç†å“¡', 'ç”Ÿç”¢ä¸»ç®¡', 'ä½œæ¥­å“¡', 'å“è³ªç®¡ç†å“¡', 'å ±è¡¨ä½¿ç”¨è€…']
for group_name in groups:
    Group.objects.get_or_create(name=group_name)
print('åŸºæœ¬ç¾¤çµ„å»ºç«‹å®Œæˆ')
"

# 10. æ”¶é›†éœæ…‹æª”æ¡ˆ
python3 manage.py collectstatic --noinput
```

## ğŸ“‹ é‡å»ºå®Œæˆå¾Œ

### 1. é‡æ–°å•Ÿå‹• Django æœå‹™
```bash
# å¦‚æœä½¿ç”¨ gunicorn
sudo systemctl restart gunicorn

# æˆ–è€…é‡æ–°å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
python3 manage.py runserver 0.0.0.0:8000
```

### 2. é‚„åŸå‚™ä»½è³‡æ–™
1. ç™»å…¥ç³»çµ±ï¼ˆadmin/admin123ï¼‰
2. é€²å…¥ç³»çµ±ç®¡ç† â†’ è³‡æ–™åº«å‚™ä»½
3. é¸æ“‡è¦é‚„åŸçš„å‚™ä»½æª”æ¡ˆ
4. åŸ·è¡Œé‚„åŸ

### 3. é©—è­‰ç³»çµ±åŠŸèƒ½
- æª¢æŸ¥æ‰€æœ‰æ¨¡çµ„æ˜¯å¦æ­£å¸¸é‹ä½œ
- ç¢ºèªè³‡æ–™æ˜¯å¦æ­£ç¢ºé‚„åŸ
- æ¸¬è©¦åŸºæœ¬åŠŸèƒ½

## âš ï¸ æ³¨æ„äº‹é …

1. **å‚™ä»½é‡è¦**ï¼šé‡å»ºå‰ç¢ºä¿æœ‰å®Œæ•´çš„å‚™ä»½æª”æ¡ˆ
2. **åœæ­¢æœå‹™**ï¼šé‡å»ºæœŸé–“å»ºè­°åœæ­¢ Django æœå‹™
3. **æ¬Šé™æª¢æŸ¥**ï¼šç¢ºä¿æœ‰è¶³å¤ çš„è³‡æ–™åº«æ¬Šé™
4. **ç¶²è·¯é€£ç·š**ï¼šç¢ºä¿èƒ½æ­£å¸¸é€£æ¥åˆ° PostgreSQL

## ğŸ¯ é æœŸçµæœ

- âœ… å…¨æ–°çš„ä¹¾æ·¨è³‡æ–™åº«
- âœ… æ‰€æœ‰ Django è³‡æ–™è¡¨æ­£ç¢ºå»ºç«‹
- âœ… è¶…ç´šç”¨æˆ¶å¸³è™Ÿå¯ç”¨
- âœ… åŸºæœ¬ç¾¤çµ„å·²å»ºç«‹
- âœ… ç³»çµ±åŠŸèƒ½å®Œå…¨æ¢å¾© 